Project File Structure:
./
    .gitignore
    app.py
    config.py
    models.py
    project_structure.txt
    __init__.py
    instance/
        recipes.db
    static/
        dynamic_fields.js
        style.css
    templates/
        index.html
        search.html
        search_results.html

Contents of .py and .html Files:

File: .\static\dynamic_fields.js

document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('addIngredientBtn').addEventListener('click', addIngredientField);
    document.addEventListener('input', function(event) {
        if (event.target.matches('.ingredientInput')) {
            fetchIngredientSuggestions(event.target);
        }
    });
    document.addEventListener("click", function (e) {
        closeAllLists(e.target);
    });
});

function addIngredientField() {
    var newField = document.createElement('div');
    newField.className = 'ingredientField';
    newField.innerHTML = '<label>Ingredient:</label> <input type="text" name="ingredient" class="ingredientInput" autocomplete="off">';
    document.getElementById('ingredientFields').appendChild(newField);
}

function fetchIngredientSuggestions(inputElement) {
    var searchTerm = inputElement.value;
    if (searchTerm.length < 1) {
        closeAllLists();
        return; // Fetch suggestions for terms longer than 0 characters
    }

    fetch('/ingredient-suggestions?q=' + encodeURIComponent(searchTerm))
        .then(response => response.json())
        .then(suggestions => {
            showSuggestions(inputElement, suggestions);
        })
        .catch(error => console.error('Error fetching ingredient suggestions:', error));
}

function showSuggestions(inputElement, suggestions) {
    closeAllLists();
    if (!suggestions.length) return;

    var list = document.createElement("DIV");
    list.setAttribute("id", inputElement.id + "autocomplete-list");
    list.setAttribute("class", "autocomplete-items");
    // Position the dropdown directly below the input element
    list.style.position = 'absolute';
    list.style.left = inputElement.getBoundingClientRect().left + 'px';
    list.style.top = (inputElement.getBoundingClientRect().top + inputElement.offsetHeight) + 'px';
    // Append the list to the body to avoid positioning issues
    document.body.appendChild(list);

    suggestions.forEach(function(suggestion) {
        var item = document.createElement("DIV");
        item.innerHTML = suggestion;
        item.addEventListener("click", function() {
            inputElement.value = suggestion;
            closeAllLists();
        });
        list.appendChild(item);
    });
}

function closeAllLists(elmnt) {
    var items = document.getElementsByClassName("autocomplete-items");
    for (var i = 0; i < items.length; i++) {
        if (elmnt != items[i] && elmnt != inputElement) {
            items[i].parentNode.removeChild(items[i]);
        }
    }
}


File: .\static\style.css

.autocomplete-items {
    border: 1px solid #d4d4d4;
    border-bottom: none;
    border-top: none;
    z-index: 99;
    /*position the autocomplete items to be the same width as the container:*/
    top: 100%;
    left: 0;
    right: 0;
}

.autocomplete-items div {
    padding: 10px;
    cursor: pointer;
    background-color: #fff;
    border-bottom: 1px solid #d4d4d4;
}

.autocomplete-items div:hover {
    /*when hovering an item:*/
    background-color: #e9e9e9;
}

.autocomplete-active {
    /*when navigating through the items using the arrow keys:*/
    background-color: DodgerBlue !important;
    color: #ffffff;
}



File: .\templates\index.html

<!DOCTYPE html>
<html>
<head>
    <title>Recipe Matcher</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>Welcome to Recipe Matcher</h1>
        <a href="/search" class="btn">Search Recipes</a>
    </div>
</body>
</html>



File: .\templates\search.html

<!DOCTYPE html>
<html>
<head>
    <title>Recipe Search</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
    <script src="{{ url_for('static', filename='dynamic_fields.js') }}"></script>
</head>
<body>
    <div class="container">
        <h1>Recipe Search</h1>
        <form action="/search" method="post" id="searchForm">
            <div id="ingredientFields">
                <div class="ingredientField">
                    <label>Ingredient:</label>
                    <input type="text" name="ingredient" class="ingredientInput" autocomplete="off">
                </div>
            </div>
            <button type="button" id="addIngredientBtn" class="btn">Add Another Ingredient</button>
            <input type="submit" value="Search" class="btn">
        </form>
    </div>
</body>
</html>



File: .\templates\search_results.html

<!DOCTYPE html>
<html>
<head>
    <title>Search Results</title>
</head>
<body>
    <h1>Search Results</h1>
    {% if recipes %}
        <ul>
            {% for recipe in recipes %}
                <li>{{ recipe.name }} - Ingredients:
                    {% for ingredient in recipe.ingredients %}
                        {{ ingredient.name }} ({{ ingredient.amount }}),
                    {% endfor %}
                    - Steps:
                    {% for step in recipe.steps %}
                        {{ step.step }};
                    {% endfor %}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No recipes found.</p>
    {% endif %}
    <a href="/">Back to search</a>
</body>
</html>

